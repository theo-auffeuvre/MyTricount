<%= render "activities/navbar_activity" %>

<div data-controller="tabs">
  <div class="flex w-full h-24">
    <div class="flex flex-col justify-center items-center h-full w-full bg-primary gap-2 active-tab" data-action="click->tabs#toggle" data-tabs-target="tab_1">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#94a3b8" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z" />
      </svg>
      <h2 class="w-full text-center text-slate-400 font-semibold">EXPENSES</h2>
    </div>
    <div class="flex flex-col justify-center items-center h-full w-full bg-primary gap-2" data-action="click->tabs#toggle" data-tabs-target="tab_2">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#94a3b8" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
      </svg>
      <h2 class="w-full text-center text-slate-400 font-semibold">BALANCES</h2>
    </div>
  </div>
  <div data-tabs-target="content_1">
    <% unless @expenses.empty? %>
      <% @expenses.each do |expense| %>
        <%= link_to edit_activity_expense_path(@activity, expense), style: "text-decoration: none" do %>
          <div class="h-24 border-b border-slate-600">
            <div class="flex justify-between h-full mx-5">
              <div class="flex flex-col align-center my-auto">
                <p class="font-medium text-lg"><%= expense.title %></p>
                <p class="text-slate-600"><%= "PayÃ© par #{expense.user.email}" %></p>
              </div>
              <div class="flex flex-col align-center my-auto">
                <p class="font-medium text-lg"><%= "#{expense.amount} #{expense.activity.currency}" %></p>
                <p class="text-slate-600"><%= expense.date %></p>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <p>No expenses yet</p>
    <% end %>

    <div class="fixed bottom-0 h-16 w-screen bg-slate-900">
      <div class="flex justify-between h-full mx-5">
        <div class="flex flex-col align-center my-auto text-left">
          <p class="text-slate-600 text-white text-sm">MY EXPENSES</p>
          <p class="font-medium text-lg text-white"><%= @activity.expenses.select{ |e| e.user == current_user}.sum{|h| h[:amount] } %> <%= @activity.currency %></p>
        </div>
        <div class="flex flex-col align-center my-auto text-right">
          <p class="text-slate-600 text-white text-sm">TOTAL EXPENSES</p>
          <p class="font-medium text-lg text-white"><%= @activity.expenses.sum(:amount) %> <%= @activity.currency %></p>
        </div>
      </div>
    </div>
    <%= link_to new_activity_expense_path(@activity) do %>
      <div class="fixed bottom-8 left-1/2 transform -translate-x-1/2 flex align-center rounded-full bg-primary w-16 h-16">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="w-full h-full p-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
      </div>
    <% end %>
  </div>
  <div class="hidden" data-tabs-target="content_2"></div>
</div>
